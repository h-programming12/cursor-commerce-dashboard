---
alwaysApply: false
---

@03-migration.mdc를 참고해서
TypeScript로 Supabase에 상품 데이터를 삽입하는 seed 스크립트 함수를 작성해주세요.

## 요구사항

1. **언어 및 가격**

   - 모든 상품명은 **한글**로 작성
   - 가격은 **원화(원)** 단위로 작성 (예: 149900원)
   - sale_price는 선택적으로 설정 (할인 상품만)

2. **데이터베이스 스키마**
   - 0001_init_schema.sql 참고
   - 테이블명: `public.products`
   - 필수 컬럼:
     - `id`: uuid (자동 생성, gen_random_uuid())
     - `name`: text (NOT NULL) - 한글 상품명
     - `description`: text (NULL 가능) - 한글 설명
     - `price`: numeric (NOT NULL, >= 0) - 원화 가격 (정수)
     - `sale_price`: numeric (NULL 가능, >= 0) - 할인가 (정수, 선택)
     - `image_url`: text (NULL 가능) - Unsplash 이미지 URL
     - `status`: text (NOT NULL) - 'registered' | 'hidden' | 'sold_out' (기본값: 'registered')
     - `created_at`: timestamp with time zone (기본값: now())
     - `updated_at`: timestamp with time zone (기본값: now())
   - 선택 컬럼 (나중에 업데이트 가능):
     - `additional_info`: text
     - `measurements`: text
     - `categories`: text[]
     - `rating_average`: numeric
     - `review_summary`: jsonb
3. **Unsplash 이미지 URL 형식**

- 기본 형식: `https://images.unsplash.com/photo-{photo-id}?w=800`
- 예시:
  - 이어폰/헤드폰: `https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=800`
  - 스마트워치: `https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=800`
  - 스피커: `https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=800`
  - 의류: `https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=800`
  - 가방: `https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=800`
  - 신발: `https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800`
- 상품 카테고리에 맞는 Unsplash 이미지 URL을 사용할 것
- Unsplash에서 검색 가능한 키워드: headphones, watch, speaker, clothing, bag, shoes, electronics, furniture 등

4. **생성할 상품 개수 및 카테고리**
   - 최소 40개 이상의 상품 생성
   - 카테고리 분포:
     - 전자제품 (이어폰, 스마트워치, 스피커, 키보드, 마우스 등): 15개
     - 의류 (티셔츠, 재킷, 신발, 모자 등): 10개
     - 가방/액세서리 (백팩, 지갑, 선글라스 등): 8개
     - 운동용품 (요가매트, 덤벨, 운동화 등): 7개
   - status 분포:
     - 'registered': 35개 (일반 상품)
     - 'sold_out': 3개 (품절 상품)
     - 'hidden': 2개 (숨김 상품)
5. **가격 범위**

- 저가: 10,000원 ~ 50,000원 (10개)
- 중가: 50,000원 ~ 150,000원 (20개)
- 고가: 150,000원 ~ 400,000원 (10개)
- sale_price는 원가의 10~30% 할인된 가격으로 설정 (일부 상품만)

6. **함수 구조**
   - 함수명: `insertProducts`
   - 파라미터: `supabase: ReturnType<typeof createSupabaseClient>`
   - 반환: `Promise<void>`
   - 중복 체크: 기존 products 개수가 40개 이상이면 스킵
   - 에러 처리: 중복 키 에러(23505)는 무시, 그 외 에러는 throw

---

## 추가 요구사항

1. **한글 상품명 예시**

   - 전자제품: "무선 이어폰 프로", "스마트워치 울트라", "블루투스 스피커", "기계식 키보드", "무선 마우스" 등
   - 의류: "클래식 화이트 티셔츠", "데님 재킷", "캐주얼 스니커즈", "야구 모자" 등
   - 가방/액세서리: "가죽 백팩", "미니멀 지갑", "클래식 선글라스" 등
   - 운동용품: "요가 매트 프로", "조정 가능한 덤벨 세트", "러닝화" 등

2. **한글 설명 예시**
   - "프리미엄 노이즈 캔슬링 무선 이어폰, 30시간 배터리 수명"
   - "심박수 모니터와 GPS가 있는 고급 피트니스 트래커"
   - "100% 유기농 면, 편안한 핏"
   - "수제 진짜 가죽 백팩, 노트북 수납 공간 포함"
3. **Unsplash 이미지 검색 가이드**

   - Unsplash에서 상품 카테고리에 맞는 이미지를 검색하여 photo-id를 찾을 것
   - 예시 검색어:
     - 이어폰/헤드폰: "headphones", "earbuds"
     - 스마트워치: "smartwatch", "fitness tracker"
     - 스피커: "bluetooth speaker", "portable speaker"
     - 의류: "t-shirt", "jacket", "sneakers"
     - 가방: "backpack", "leather bag"
     - 운동용품: "yoga mat", "dumbbell", "running shoes"
   - Unsplash URL 형식: `https://images.unsplash.com/photo-{photo-id}?w=800`
   - photo-id는 Unsplash 이미지 페이지 URL에서 확인 가능

4. **가격 설정 가이드**

   - 원화 가격은 정수로 작성 (소수점 없음)
   - 예시: 149900 (149,900원), 299900 (299,900원)
   - sale_price는 원가의 10~30% 할인된 가격
   - 예시: price 149900 → sale_price 119900 (약 20% 할인)

5. **코드 품질**
   - TypeScript 타입 안전성 유지
   - 에러 처리 포함
   - 콘솔 로그로 진행 상황 표시
   - 중복 삽입 방지 로직 포함
